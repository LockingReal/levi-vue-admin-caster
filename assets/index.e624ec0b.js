var e=Object.assign;import{d as a,r as s,j as t,o as d,t as i,x as o,y as l,b as c,c as r,e as n,f as u,z as v,i as m}from"./index.597464c9.js";import"./vendor.be963390.js";var b=a({name:"buffer-screenrecorder",setup(){let a=s({mediaRecorder:null,data:[],stream:null,checked:!1,isStart:!1,isFinish:!1});const o=t(null);d((()=>{}));return e({video:o,onStartBtn:async()=>{a.isStart=!0,a.isFinish=!1;const e=navigator.mediaDevices;a.stream=await e.getDisplayMedia({video:!0,audio:a.checked}),a.mediaRecorder=new MediaRecorder(a.stream,{mimeType:"video/webm"}),a.mediaRecorder&&(a.mediaRecorder.ondataavailable=e=>{a.data.push(e.data)},a.mediaRecorder.start(),o.value&&(o.value.srcObject=a.stream,o.value.play()))},onEndBtn:()=>{var e;a.isStart=!1,a.isFinish=!0,o.value&&a.mediaRecorder&&(null==(e=o.value)||e.pause(),a.mediaRecorder.pause(),a.mediaRecorder.stop(),a.stream.getTracks().forEach((e=>{e.stop()})))},onDownloadBtn:()=>{let e=new Blob(a.data,{type:"video/mp4"});console.log(e);let s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`${(new Date).getTime()}.mp4`,t.click(),t.remove()}},i(a))}});const p=v("data-v-5b5359ac");o("data-v-5b5359ac");const _={class:"container"},y={class:"row justify-content-center"},h={class:"col-xl-auto"},k={class:"card-body"},f={class:"row"},w={class:"record_voice_askbox"},R=u("label",{for:"audio",class:"record_voice_askbox_label"},"是否录制声音",-1),g={class:"row"},x={class:"col-xl"},S={class:"card"},j={ref:"video",src:"",width:"600",height:"400",class:"video_dom_style"},B=m("开始录制"),C=m("结束录制"),D=m("下载录制结果");l();const F=p(((e,a,s,t,d,i)=>{const o=c("a-input"),l=c("a-button"),v=c("a-row"),m=c("a-card");return r(),n("div",_,[u("div",y,[u("div",h,[u(m,{title:"屏幕录制"},{default:p((()=>[u("div",k,[u("div",f,[u("div",null,[u("div",w,[R,u(o,{id:"audio",modelValue:e.checked,"onUpdate:modelValue":a[1]||(a[1]=a=>e.checked=a),type:"checkbox",class:"record_voice_checkbox_merge",disabled:e.isStart&&!e.isFinish},null,8,["modelValue","disabled"])])])]),u("div",g,[u("div",x,[u("div",S,[u("video",j,null,512)])])]),u(v,null,{default:p((()=>[u(l,{type:"primary",disabled:e.isStart,class:"action_btn_style",onClick:e.onStartBtn},{default:p((()=>[B])),_:1},8,["disabled","onClick"]),u(l,{type:"danger",disabled:!e.isStart,class:"action_btn_style",onClick:e.onEndBtn},{default:p((()=>[C])),_:1},8,["disabled","onClick"]),u(l,{type:"primary",disabled:!e.isFinish,class:"action_btn_style",onClick:e.onDownloadBtn},{default:p((()=>[D])),_:1},8,["disabled","onClick"])])),_:1})])])),_:1})])])])}));b.render=F,b.__scopeId="data-v-5b5359ac";export default b;
