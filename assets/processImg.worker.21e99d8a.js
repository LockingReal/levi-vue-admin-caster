onmessage=t=>{const{imageData:e,tempData:o,imgType:r,greyLevel:s}=t.data,a=self[`${r}Img`],f="normal"===r?e:a(e,o,s);self.postMessage(f)},self.reverseImg=function(t){const{data:e,width:o,height:r}=t;for(let s=0;s<o*r;s++){let t=e[4*s+0],o=e[4*s+1],r=e[4*s+2];e[4*s+0]=255-t,e[4*s+1]=255-o,e[4*s+2]=255-r}return t},self.gaussBlurImg=function(t,e){const{data:o,width:r,height:s}=t;let a,f,n,g,h,l,i,c,m,u,d=[],I=0;const p=20;for(l=1/(20*Math.sqrt(2*Math.PI)),h=-1/800,i=0,a=-20;a<=p;a++,i++)g=l*Math.exp(h*a*a),d[i]=g,I+=g;for(i=0,u=d.length;i<u;i++)d[i]/=I;for(f=0;f<s;f++)for(a=0;a<r;a++){for(n=g=h=l=0,I=0,c=-20;c<=p;c++)m=a+c,m>=0&&m<r&&(i=4*(f*r+m),n+=o[i]*d[c+p],g+=o[i+1]*d[c+p],h+=o[i+2]*d[c+p],I+=d[c+p]);i=4*(f*r+a),o[i]=n/I,o[i+1]=g/I,o[i+2]=h/I}for(a=0;a<r;a++)for(f=0;f<s;f++){for(n=g=h=l=0,I=0,c=-20;c<=p;c++)m=f+c,m>=0&&m<s&&(i=4*(m*r+a),n+=o[i]*d[c+p],g+=o[i+1]*d[c+p],h+=o[i+2]*d[c+p],I+=d[c+p]);i=4*(f*r+a),o[i]=n/I,o[i+1]=g/I,o[i+2]=h/I}for(i=0;i<s;i++)for(c=0;c<r;c++){const t=4*(i*r+c);o[t+0]=e[t+0]-o[t+0]+127.5,o[t+1]=e[t+1]-o[t+1]+127.5,o[t+2]=e[t+2]-o[t+2]+127.5}return t},self.greyImg=function(t,e,o){const{data:r,width:s,height:a}=t;for(let f=0;f<s*a;f++){const t=(r[4*f+0]+r[4*f+1]+r[4*f+2])/o;r[4*f+0]=t,r[4*f+1]=t,r[4*f+2]=t}return t};
